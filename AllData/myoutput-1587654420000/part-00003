{"title_page": "Shingled magnetic recording", "text_new": "{{short description|High-density disk drive recording technology}}\n{{Use mdy dates|date=January 2015}}\n{{missing information|article|preferred use (archival, append-only write but random read), like dropbox}}\n[[File:SMR HDD Rewrite.png|thumb|right|Partial updating of data is difficult with SMR. Data will be written to adjacent tracks that do not need to be rewritten.]]\n'''Shingled magnetic recording''' ('''SMR''') is a [[magnetic storage]] data recording technology used in [[hard disk drive]]s (HDDs) to increase [[storage density]] and overall per-drive storage capacity.<ref name=\"anandtech-7290\">{{cite web |url=http://www.anandtech.com/show/7290/seagate-to-ship-5tb-hdd-in-2014-using-shingled-magnetic-recording/ |publisher=[[AnandTech]]| title=Seagate to Ship 5TB HDD in 2014 using Shingled Magnetic Recording |author=Anand Lal Shimpi |date=September 9, 2013 |accessdate=February 9, 2015}}</ref> Conventional hard disk drives record data by writing non-overlapping magnetic tracks parallel to each other ([[perpendicular recording]]), while shingled recording writes new tracks that overlap part of the previously written magnetic track, leaving the previous track narrower and allowing for higher track density. Thus, the tracks partially overlap similar to [[roof shingle]]s.  This approach was selected because physical limitations prevent recording magnetic heads from having the same width as reading heads, leaving recording heads wider.<ref>{{cite web |url=http://www.ewh.ieee.org/r6/scv/mag/MtgSum/Meeting2010_10_Presentation.pdf |title=Shingled Magnetic Recording and Two-Dimensional Magnetic Recording |author=Roger Wood |website=ewh.ieee.org |date=October 19, 2010 |accessdate=December 14, 2014 |format=PDF}}</ref><ref>{{cite web |url=http://www.storagereview.com/what_is_shingled_magnetic_recording_smr/ |title=What is Shingled Magnetic Recording (SMR)? |website=storagereview.com |date=January 30, 2015 |accessdate=February 9, 2015}}</ref><ref name=\"snia-smr\">{{cite web\n | url = http://www.snia.org/sites/default/files/Dunn-Feldman_SNIA_Tutorial_Shingled_Magnetic_Recording-r7_Final.pdf\n | title = Shingled Magnetic Recording: Models, Standardization, and Applications\n | date = September 22, 2014 | accessdate = February 9, 2015\n | author1 = Mary Dunn | author2 = Timothy Feldman\n | publisher = [[Storage Networking Industry Association]]\n | format = PDF\n}}</ref>{{rp|7&ndash;9}}\n\nThe overlapping-tracks architecture complicates the writing process since writing to one track also overwrites an adjacent track. If adjacent tracks contain valid data, they must be rewritten as well. As a result, SMR drives are divided into many [[append-only]] (sequential) zones that need to be rewritten entirely when full, resembling flash blocks in [[solid state drive]]s. ''Device-managed'' SMR devices hide this complexity by managing it in the firmware, presenting an interface like any other hard disk. Other SMR devices are ''host-managed'' and depend on the operating system to know how to handle the drive, and only write sequentially to certain regions of the drive. <ref name=\"snia-smr\" />{{rp|11 ff.}}<ref>{{cite web |url=https://lwn.net/Articles/591782/ |title=Support for shingled magnetic recording devices |author=Jake Edge |publisher=[[LWN.net]] |date=March 26, 2014 |accessdate=December 14, 2014}}</ref>\n\n==History==\n[[Seagate Technology|Seagate]] has been shipping device-managed SMR hard drives since September 2013, while referring to an increase in overall hard disk drive capacity of about 25%, compared to non-shingled storage.<ref name=\"anandtech-7290\" /> In September 2014, [[HGST]] announced a 10&nbsp;TB drive filled with [[helium]] that uses host-managed shingled magnetic recording,<ref>{{Cite news |title= Shingled platters breathe helium inside HGST's 10TB hard drive |author= Geoff Gasior |date= September 9, 2014|work= The Tech Report |url= http://techreport.com/news/27031/shingled-platters-breathe-helium-inside-hgst-10tb-hard-drive |accessdate=February 9, 2015}}</ref> although in December 2015 it followed this with a 10&nbsp;TB helium-filled drive that uses conventional non-shingled perpendicular recording.<ref>{{cite news |title=HGST releases helium-filled 10TB hard drive; Seagate twiddles shingled fingers |author=Sebastian Anthony |date=3 December 2015 |work=Ars Technica |url=http://arstechnica.co.uk/information-technology/2015/12/hgst-releases-helium-filled-10tb-hard-drive-seagate-twiddles-shingled-fingers/ |accessdate=3 December 2015}}</ref> In November 2018, HGST introduced 14- and 15-TB drives.<ref>{{cite web |title=15TB and 14TB SMR Hard Drives Ultrastar DC HC620 |url=https://www.hgst.com/products/hard-drives/ultrastar-dc-hc620 |website=www.hgst.com |accessdate=30 October 2018 |language=en}}</ref>\n\n[[Western Digital]], Seagate and [[Toshiba]] have begun selling SMR drives without labeling them as such, thus revealing a large controversy, as SMR drives are much slower in some circumstances than [[Perpendicular recording|PMR]] drives.<ref name=Alcorn>{{cite news |last=Alcorn |first=Paul |date= |title=Sneaky Marketing Redux: Toshiba, Seagate Shipping Slower SMR Drives Without Disclosure, Too |url=https://www.tomshardware.com/news/sneaky-marketing-toshiba-seagate-wd-smr-drives-without-disclosure |work=Tom\u2019s Hardware  |access-date=17 April 2020}}</ref> These practices were used to be in both data storage-dedicated (for servers, NASes and cold storage) and consumer-centric HDDs.\n\n==Data management==\nThere are three different ways that data can be managed on an SMR drive:<ref>{{cite web |url=http://www.t10.org/cgi-bin/ac.pl?t=f&f=zbc-r05.pdf |title=Zoned Block Commands (ZBC) |website=t10.org |publisher=ANSI T10 Committee |access-date=22 January 2018}}</ref><ref>{{cite web |url=http://www.snia.org/sites/default/files/SDC15_presentations/smr/JorgeCampello_SMR_Next_Generation_Storage_Technology.pdf |title=SMR: The Next Generation of Storage Technology |first=Jorge |last=Campello |date=24 September 2015 |access-date=22 January 2018}}</ref>\n* Device Managed\n* Host Managed\n* Host Aware\n\n===Device managed===\nA Device Managed drive appears to the host identically to a non-shingled drive.  It is not necessary for the host to follow any special protocols. All handling of data, as it relates to the shingled nature of the storage, is managed by the device.  In addition, the host is unaware that the storage is shingled.<ref name=\"snia-smr\" />\n\nThis type of SMR drives are often not labelled by the manufacturer.  Its firmware-controlled operation can be compared to [[solid state drive]]s, as LBA addresses do not correlate much to on-disk structure.  The append-only zones are very slow for random writing, so writes are first sent to a PMR (CMR) cache, and the disk moves these data to SMR parts when idle.  RAID [[resilvering]] tends to overload the cache, sending SMR drives into minutes-long pauses. Faulty firmware (such as WD40EFAX) may also throw an error when asked to read an address never written to. Both behaviors tend to be interpreted as drive failure by the RAID controller.<ref>{{cite web |last1=Mellor |first1=Chris |title=Shingled hard drives have non-shingled zones for caching writes |url=https://blocksandfiles.com/2020/04/15/shingled-drives-have-non-shingled-zones-for-caching-writes/ |website=Blocks and Files |date=15 April 2020}}</ref>\n\nThe zoned nature of SMR also means that the disk suffers from [[write amplification]], although for hard drives the main problem with writes is speed instead of longevity. Some SMR hard drives support [[TRIM]] for this reason.<ref>{{cite web |title=TRIM Command Support for WD External Drives |url=https://support-en.wd.com/app/answers/detail/a_id/25185 |website=WD support}}</ref>\n\n===Host managed===\nA Host Managed device requires strict adherence to a special protocol by the host. Since the host manages the shingled nature of the storage, it is required to write sequentially so as to not destroy existing data. The drive will refuse to execute commands which violate this protocol.<ref name=\"snia-smr\" />\n\nTwo set of specialized commands, ZBC (Zoned Block Commands) for [[SCSI]] and ZAC (Zoned ATA Commands) for [[SATA]] are available for host-managed and host-aware devices. They tell the host about whether each zone is PMR or SMR and allow them to address these zones directly.<ref name=\"tom\">{{Cite web|archiveurl=https://web.archive.org/web/20170611164138/http://www.tomsitpro.com/articles/shingled-magnetic-recoding-smr-101-basics,2-933.html|archivedate=2017-06-11|url=http://www.tomsitpro.com/articles/shingled-magnetic-recoding-smr-101-basics,2-933.html|title=SMR (Shingled Magnetic Recording) 101|accessdate=2018-03-03|publisher=Tom's IT Pro|language=en}}</ref>\n\n===Host aware===\nHost Aware is a combination of Drive Managed and Host Managed. The drive is capable of managing the shingled nature of the storage and will execute any command the host gives it, regardless of if it is sequential or not. However, the host is aware that the drive is shingled, and able to query the drive for fill levels.  This allows the host to optimize writes for the shingled nature, while also allowing the drive to be flexible and backwards-compatible.<ref name=\"snia-smr\" />\n\n==Dynamic hybrid SMR==\nWhile for traditional SMR models each zone is assigned a type at manufacture time, dynamic hybrid SMR drives allow to reconfigure the zone type from shingled to conventional and back by the customer.<ref>{{cite web|url=https://blog.westerndigital.com/dynamic-hybrid-smr/|title=Dynamic Hybrid SMR|last=Collins|first=Brendan|date=13 November 2017|publisher=Western Digital|accessdate=25 August 2018}}</ref><ref>{{cite web|url=https://www.blog.google/topics/google-cloud/dynamic-hybrid-smr-ocp-proposal-improve-data-center-disk-drives/|title=Dynamic Hybrid-SMR: an OCP proposal to improve data center disk drives|date=13 November 2017|website=blog.google|publisher=Google|access-date=22 January 2018}}</ref>\n\n== See also ==\n* [[Heat-assisted magnetic recording]] (HAMR)\n* [[Patterned media]]\n* [[Two-dimensional magnetic recording]]\n* [[Log-structured file system]], a type of file system optimized for append-only media\n\n== References ==\n{{Reflist|30em}}\n\n== External links ==\n* [https://lwn.net/Articles/548116/ LSFMM: A storage technology update], [[LWN.net]], April 23, 2013, by Jonathan Corbet\n* [https://events.static.linuxfound.org/sites/events/files/slides/SMR-LinuxConUSA-2014.pdf SMR Impact on Linux Storage Subsystem], HGST, 2014, by Jorge Campello and Adam Manzanares\n* [http://xfs.org/images/f/f6/Xfs-smr-structure-0.2.pdf Layout optimisation for using XFS on host-managed SMR drives], March 2015\n* [https://events.static.linuxfound.org/sites/events/files/slides/SMR%20in%20Linux%20Systems%20-%20Vault.pdf SMR in Linux Systems], Seagate, March 18, 2015, by Adrian Palmer\n* [http://open-zfs.org/w/images/2/2a/Host-Aware_SMR-Tim_Feldman.pdf Host-Aware SMR], Seagate, November 10, 2014, by Timothy Feldman\n* [https://research.google.com/pubs/pub44830.html Disks for Data Centers], Google, 2016, by Eric Brewer, Lawrence Ying, Lawrence Greenfield, Robert Cypher, and Theodore T'so\n* [https://blogs.dropbox.com/tech/2018/06/extending-magic-pocket-innovation-with-the-first-petabyte-scale-smr-drive-deployment/ Extending Magic Pocket Innovation with the First Petabyte Scale SMR Drive Deployment], Dropbox, 2018, by Chris Dudte, Victor Li, Preslav Le, Jennifer Basalone, Alexander Sosa, Rajat Goel, Ashley Clark, James Turner, Vlad Seliverstov, Sujay Jayakar, Rami Aljamal\n\n[[Category:Computer storage technologies]]\n[[Category:Hard disk drives]]\n", "text_old": "{{short description|High-density disk drive recording technology}}\n{{Use mdy dates|date=January 2015}}\n{{missing information|article|preferred use (append-only archival but random read), like dropbox}}\n[[File:SMR HDD Rewrite.png|thumb|right|Partial updating of data is difficult with SMR. Data will be written to adjacent tracks that do not need to be rewritten.]]\n'''Shingled magnetic recording''' ('''SMR''') is a [[magnetic storage]] data recording technology used in [[hard disk drive]]s (HDDs) to increase [[storage density]] and overall per-drive storage capacity.<ref name=\"anandtech-7290\">{{cite web |url=http://www.anandtech.com/show/7290/seagate-to-ship-5tb-hdd-in-2014-using-shingled-magnetic-recording/ |publisher=[[AnandTech]]| title=Seagate to Ship 5TB HDD in 2014 using Shingled Magnetic Recording |author=Anand Lal Shimpi |date=September 9, 2013 |accessdate=February 9, 2015}}</ref> Conventional hard disk drives record data by writing non-overlapping magnetic tracks parallel to each other ([[perpendicular recording]]), while shingled recording writes new tracks that overlap part of the previously written magnetic track, leaving the previous track narrower and allowing for higher track density. Thus, the tracks partially overlap similar to [[roof shingle]]s.  This approach was selected because physical limitations prevent recording magnetic heads from having the same width as reading heads, leaving recording heads wider.<ref>{{cite web |url=http://www.ewh.ieee.org/r6/scv/mag/MtgSum/Meeting2010_10_Presentation.pdf |title=Shingled Magnetic Recording and Two-Dimensional Magnetic Recording |author=Roger Wood |website=ewh.ieee.org |date=October 19, 2010 |accessdate=December 14, 2014 |format=PDF}}</ref><ref>{{cite web |url=http://www.storagereview.com/what_is_shingled_magnetic_recording_smr/ |title=What is Shingled Magnetic Recording (SMR)? |website=storagereview.com |date=January 30, 2015 |accessdate=February 9, 2015}}</ref><ref name=\"snia-smr\">{{cite web\n | url = http://www.snia.org/sites/default/files/Dunn-Feldman_SNIA_Tutorial_Shingled_Magnetic_Recording-r7_Final.pdf\n | title = Shingled Magnetic Recording: Models, Standardization, and Applications\n | date = September 22, 2014 | accessdate = February 9, 2015\n | author1 = Mary Dunn | author2 = Timothy Feldman\n | publisher = [[Storage Networking Industry Association]]\n | format = PDF\n}}</ref>{{rp|7&ndash;9}}\n\nThe overlapping-tracks architecture complicates the writing process since writing to one track also overwrites an adjacent track. If adjacent tracks contain valid data, they must be rewritten as well. As a result, SMR drives are divided into many [[append-only]] (sequential) zones that need to be rewritten entirely when full, resembling flash blocks in [[solid state drive]]s. ''Device-managed'' SMR devices hide this complexity by managing it in the firmware, presenting an interface like any other hard disk. Other SMR devices are ''host-managed'' and depend on the operating system to know how to handle the drive, and only write sequentially to certain regions of the drive. <ref name=\"snia-smr\" />{{rp|11 ff.}}<ref>{{cite web |url=https://lwn.net/Articles/591782/ |title=Support for shingled magnetic recording devices |author=Jake Edge |publisher=[[LWN.net]] |date=March 26, 2014 |accessdate=December 14, 2014}}</ref>\n\n==History==\n[[Seagate Technology|Seagate]] has been shipping device-managed SMR hard drives since September 2013, while referring to an increase in overall hard disk drive capacity of about 25%, compared to non-shingled storage.<ref name=\"anandtech-7290\" /> In September 2014, [[HGST]] announced a 10&nbsp;TB drive filled with [[helium]] that uses host-managed shingled magnetic recording,<ref>{{Cite news |title= Shingled platters breathe helium inside HGST's 10TB hard drive |author= Geoff Gasior |date= September 9, 2014|work= The Tech Report |url= http://techreport.com/news/27031/shingled-platters-breathe-helium-inside-hgst-10tb-hard-drive |accessdate=February 9, 2015}}</ref> although in December 2015 it followed this with a 10&nbsp;TB helium-filled drive that uses conventional non-shingled perpendicular recording.<ref>{{cite news |title=HGST releases helium-filled 10TB hard drive; Seagate twiddles shingled fingers |author=Sebastian Anthony |date=3 December 2015 |work=Ars Technica |url=http://arstechnica.co.uk/information-technology/2015/12/hgst-releases-helium-filled-10tb-hard-drive-seagate-twiddles-shingled-fingers/ |accessdate=3 December 2015}}</ref> In November 2018, HGST introduced 14- and 15-TB drives.<ref>{{cite web |title=15TB and 14TB SMR Hard Drives Ultrastar DC HC620 |url=https://www.hgst.com/products/hard-drives/ultrastar-dc-hc620 |website=www.hgst.com |accessdate=30 October 2018 |language=en}}</ref>\n\n[[Western Digital]], Seagate and [[Toshiba]] have begun selling SMR drives without labeling them as such, thus revealing a large controversy, as SMR drives are much slower in some circumstances than [[Perpendicular recording|PMR]] drives.<ref name=Alcorn>{{cite news |last=Alcorn |first=Paul |date= |title=Sneaky Marketing Redux: Toshiba, Seagate Shipping Slower SMR Drives Without Disclosure, Too |url=https://www.tomshardware.com/news/sneaky-marketing-toshiba-seagate-wd-smr-drives-without-disclosure |work=Tom\u2019s Hardware  |access-date=17 April 2020}}</ref> These practices were used to be in both data storage-dedicated (for servers, NASes and cold storage) and consumer-centric HDDs.\n\n==Data management==\nThere are three different ways that data can be managed on an SMR drive:<ref>{{cite web |url=http://www.t10.org/cgi-bin/ac.pl?t=f&f=zbc-r05.pdf |title=Zoned Block Commands (ZBC) |website=t10.org |publisher=ANSI T10 Committee |access-date=22 January 2018}}</ref><ref>{{cite web |url=http://www.snia.org/sites/default/files/SDC15_presentations/smr/JorgeCampello_SMR_Next_Generation_Storage_Technology.pdf |title=SMR: The Next Generation of Storage Technology |first=Jorge |last=Campello |date=24 September 2015 |access-date=22 January 2018}}</ref>\n* Device Managed\n* Host Managed\n* Host Aware\n\n===Device managed===\nA Device Managed drive appears to the host identically to a non-shingled drive.  It is not necessary for the host to follow any special protocols. All handling of data, as it relates to the shingled nature of the storage, is managed by the device.  In addition, the host is unaware that the storage is shingled.<ref name=\"snia-smr\" />\n\nThis type of SMR drives are often not labelled by the manufacturer.  Its firmware-controlled operation can be compared to [[solid state drive]]s, as LBA addresses do not correlate much to on-disk structure.  The append-only zones are very slow for random writing, so writes are first sent to a PMR (CMR) cache, and the disk moves these data to SMR parts when idle.  RAID [[resilvering]] tends to overload the cache, sending SMR drives into minutes-long pauses. Faulty firmware (such as WD40EFAX) may also throw an error when asked to read an address never written to. Both behaviors tend to be interpreted as drive failure by the RAID controller.<ref>{{cite web |last1=Mellor |first1=Chris |title=Shingled hard drives have non-shingled zones for caching writes |url=https://blocksandfiles.com/2020/04/15/shingled-drives-have-non-shingled-zones-for-caching-writes/ |website=Blocks and Files |date=15 April 2020}}</ref>\n\nThe zoned nature of SMR also means that the disk suffers from [[write amplification]], although for hard drives the main problem with writes is speed instead of longevity. Some SMR hard drives support [[TRIM]] for this reason.<ref>{{cite web |title=TRIM Command Support for WD External Drives |url=https://support-en.wd.com/app/answers/detail/a_id/25185 |website=WD support}}</ref>\n\n===Host managed===\nA Host Managed device requires strict adherence to a special protocol by the host. Since the host manages the shingled nature of the storage, it is required to write sequentially so as to not destroy existing data. The drive will refuse to execute commands which violate this protocol.<ref name=\"snia-smr\" />\n\nTwo set of specialized commands, ZBC (Zoned Block Commands) for [[SCSI]] and ZAC (Zoned ATA Commands) for [[SATA]] are available for host-managed and host-aware devices. They tell the host about whether each zone is PMR or SMR and allow them to address these zones directly.<ref name=\"tom\">{{Cite web|archiveurl=https://web.archive.org/web/20170611164138/http://www.tomsitpro.com/articles/shingled-magnetic-recoding-smr-101-basics,2-933.html|archivedate=2017-06-11|url=http://www.tomsitpro.com/articles/shingled-magnetic-recoding-smr-101-basics,2-933.html|title=SMR (Shingled Magnetic Recording) 101|accessdate=2018-03-03|publisher=Tom's IT Pro|language=en}}</ref>\n\n===Host aware===\nHost Aware is a combination of Drive Managed and Host Managed. The drive is capable of managing the shingled nature of the storage and will execute any command the host gives it, regardless of if it is sequential or not. However, the host is aware that the drive is shingled, and able to query the drive for fill levels.  This allows the host to optimize writes for the shingled nature, while also allowing the drive to be flexible and backwards-compatible.<ref name=\"snia-smr\" />\n\n==Dynamic hybrid SMR==\nWhile for traditional SMR models each zone is assigned a type at manufacture time, dynamic hybrid SMR drives allow to reconfigure the zone type from shingled to conventional and back by the customer.<ref>{{cite web|url=https://blog.westerndigital.com/dynamic-hybrid-smr/|title=Dynamic Hybrid SMR|last=Collins|first=Brendan|date=13 November 2017|publisher=Western Digital|accessdate=25 August 2018}}</ref><ref>{{cite web|url=https://www.blog.google/topics/google-cloud/dynamic-hybrid-smr-ocp-proposal-improve-data-center-disk-drives/|title=Dynamic Hybrid-SMR: an OCP proposal to improve data center disk drives|date=13 November 2017|website=blog.google|publisher=Google|access-date=22 January 2018}}</ref>\n\n== See also ==\n* [[Heat-assisted magnetic recording]] (HAMR)\n* [[Patterned media]]\n* [[Two-dimensional magnetic recording]]\n* [[Log-structured file system]], a type of file system optimized for append-only media\n\n== References ==\n{{Reflist|30em}}\n\n== External links ==\n* [https://lwn.net/Articles/548116/ LSFMM: A storage technology update], [[LWN.net]], April 23, 2013, by Jonathan Corbet\n* [https://events.static.linuxfound.org/sites/events/files/slides/SMR-LinuxConUSA-2014.pdf SMR Impact on Linux Storage Subsystem], HGST, 2014, by Jorge Campello and Adam Manzanares\n* [http://xfs.org/images/f/f6/Xfs-smr-structure-0.2.pdf Layout optimisation for using XFS on host-managed SMR drives], March 2015\n* [https://events.static.linuxfound.org/sites/events/files/slides/SMR%20in%20Linux%20Systems%20-%20Vault.pdf SMR in Linux Systems], Seagate, March 18, 2015, by Adrian Palmer\n* [http://open-zfs.org/w/images/2/2a/Host-Aware_SMR-Tim_Feldman.pdf Host-Aware SMR], Seagate, November 10, 2014, by Timothy Feldman\n* [https://research.google.com/pubs/pub44830.html Disks for Data Centers], Google, 2016, by Eric Brewer, Lawrence Ying, Lawrence Greenfield, Robert Cypher, and Theodore T'so\n* [https://blogs.dropbox.com/tech/2018/06/extending-magic-pocket-innovation-with-the-first-petabyte-scale-smr-drive-deployment/ Extending Magic Pocket Innovation with the First Petabyte Scale SMR Drive Deployment], Dropbox, 2018, by Chris Dudte, Victor Li, Preslav Le, Jennifer Basalone, Alexander Sosa, Rajat Goel, Ashley Clark, James Turner, Vlad Seliverstov, Sujay Jayakar, Rami Aljamal\n\n[[Category:Computer storage technologies]]\n[[Category:Hard disk drives]]\n", "name_user": "Artoria2e5", "label": "safe", "comment": "", "url_page": "//en.wikipedia.org/wiki/Shingled_magnetic_recording"}
